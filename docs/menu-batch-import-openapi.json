{
  "openapi": "3.0.3",
  "info": {
    "title": "Saturn MouseHunter - èœå•æ‰¹é‡å¯¼å…¥API",
    "description": "èœå•æ‰¹é‡å¯¼å…¥å’Œç®¡ç†APIæ¥å£å®šä¹‰",
    "version": "1.0.0",
    "contact": {
      "name": "Saturn MouseHunter Team",
      "email": "team@saturn-mousehunter.com"
    }
  },
  "servers": [
    {
      "url": "http://192.168.8.168:8005/api/v1",
      "description": "è®¤è¯æœåŠ¡ - æµ‹è¯•ç¯å¢ƒ"
    }
  ],
  "security": [
    {
      "BearerAuth": []
    }
  ],
  "paths": {
    "/menus/batch-import": {
      "post": {
        "tags": ["èœå•ç®¡ç†"],
        "summary": "æ‰¹é‡å¯¼å…¥èœå•",
        "description": "æ‰¹é‡å¯¼å…¥èœå•é…ç½®ï¼Œæ”¯æŒå¢é‡å¯¼å…¥æˆ–å…¨é‡è¦†ç›–æ¨¡å¼",
        "security": [{"BearerAuth": ["admin"]}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MenuBatchImportRequest"
              },
              "example": {
                "menus": [
                  {
                    "id": "dashboard",
                    "name": "dashboard",
                    "title": "æ€»è§ˆ",
                    "title_en": "Dashboard",
                    "path": "/",
                    "component": "Dashboard",
                    "icon": "dashboard",
                    "emoji": "ğŸ ",
                    "permission": "menu:dashboard",
                    "menu_type": "menu",
                    "sort_order": 1,
                    "is_hidden": false,
                    "is_external": false,
                    "status": "active",
                    "meta": {
                      "title": "æ€»è§ˆ",
                      "title_en": "Dashboard",
                      "keepAlive": true
                    }
                  },
                  {
                    "id": "trading_calendar_table",
                    "name": "trading_calendar_table",
                    "title": "äº¤æ˜“æ—¥å†è¡¨æ ¼",
                    "title_en": "Trading Calendar Table",
                    "path": "/trading-calendar-table",
                    "component": "TradingCalendarTable",
                    "parent_id": "trading_calendar",
                    "permission": "trading_calendar:read",
                    "menu_type": "menu",
                    "sort_order": 1,
                    "is_hidden": false,
                    "is_external": false,
                    "status": "active",
                    "meta": {
                      "title": "äº¤æ˜“æ—¥å†è¡¨æ ¼",
                      "title_en": "Trading Calendar Table"
                    }
                  }
                ],
                "clear_existing": false
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "æ‰¹é‡å¯¼å…¥æˆåŠŸ",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MenuResponse"
                },
                "example": {
                  "success": true,
                  "message": "æˆåŠŸå¯¼å…¥ 2 ä¸ªèœå•",
                  "data": {
                    "imported_count": 2,
                    "clear_existing": false
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/menus": {
      "get": {
        "tags": ["èœå•ç®¡ç†"],
        "summary": "è·å–èœå•åˆ—è¡¨",
        "description": "è·å–èœå•åˆ—è¡¨ï¼Œæ”¯æŒæŒ‰çˆ¶èœå•å’ŒçŠ¶æ€è¿‡æ»¤",
        "security": [{"BearerAuth": []}],
        "parameters": [
          {
            "name": "parent_id",
            "in": "query",
            "required": false,
            "description": "çˆ¶èœå•IDï¼Œç©ºå€¼è·å–æ ¹èœå•",
            "schema": {
              "type": "string",
              "example": "user_management"
            }
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "description": "èœå•çŠ¶æ€è¿‡æ»¤",
            "schema": {
              "type": "string",
              "enum": ["active", "disabled"],
              "example": "active"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "èœå•åˆ—è¡¨",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/MenuItem"
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      },
      "post": {
        "tags": ["èœå•ç®¡ç†"],
        "summary": "åˆ›å»ºå•ä¸ªèœå•",
        "description": "åˆ›å»ºæ–°çš„èœå•é¡¹",
        "security": [{"BearerAuth": ["admin"]}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MenuCreateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "èœå•åˆ›å»ºæˆåŠŸ",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MenuResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/menus/{menu_id}": {
      "get": {
        "tags": ["èœå•ç®¡ç†"],
        "summary": "è·å–èœå•è¯¦æƒ…",
        "description": "æ ¹æ®èœå•IDè·å–èœå•è¯¦ç»†ä¿¡æ¯",
        "security": [{"BearerAuth": []}],
        "parameters": [
          {
            "name": "menu_id",
            "in": "path",
            "required": true,
            "description": "èœå•ID",
            "schema": {
              "type": "string",
              "example": "dashboard"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "èœå•è¯¦æƒ…",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MenuItem"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      },
      "put": {
        "tags": ["èœå•ç®¡ç†"],
        "summary": "æ›´æ–°èœå•",
        "description": "æ›´æ–°æŒ‡å®šèœå•çš„ä¿¡æ¯",
        "security": [{"BearerAuth": ["admin"]}],
        "parameters": [
          {
            "name": "menu_id",
            "in": "path",
            "required": true,
            "description": "èœå•ID",
            "schema": {
              "type": "string",
              "example": "dashboard"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MenuUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "èœå•æ›´æ–°æˆåŠŸ",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MenuResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      },
      "delete": {
        "tags": ["èœå•ç®¡ç†"],
        "summary": "åˆ é™¤èœå•",
        "description": "åˆ é™¤æŒ‡å®šèœå•",
        "security": [{"BearerAuth": ["admin"]}],
        "parameters": [
          {
            "name": "menu_id",
            "in": "path",
            "required": true,
            "description": "èœå•ID",
            "schema": {
              "type": "string",
              "example": "dashboard"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "èœå•åˆ é™¤æˆåŠŸ",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MenuResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/menus/tree": {
      "get": {
        "tags": ["èœå•ç®¡ç†"],
        "summary": "è·å–èœå•æ ‘ç»“æ„",
        "description": "è·å–å®Œæ•´èœå•æ ‘ç»“æ„ï¼Œç®¡ç†å‘˜å¯æŸ¥çœ‹å…¨éƒ¨ï¼Œæ™®é€šç”¨æˆ·ä»…æŸ¥çœ‹æœ‰æƒé™çš„èœå•",
        "security": [{"BearerAuth": []}],
        "parameters": [
          {
            "name": "include_hidden",
            "in": "query",
            "required": false,
            "description": "æ˜¯å¦åŒ…å«éšè—èœå•",
            "schema": {
              "type": "boolean",
              "default": false
            }
          }
        ],
        "responses": {
          "200": {
            "description": "èœå•æ ‘ç»“æ„",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/MenuItem"
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "BearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    },
    "schemas": {
      "MenuCreateRequest": {
        "type": "object",
        "required": ["id", "name", "title"],
        "properties": {
          "id": {
            "type": "string",
            "description": "èœå•å”¯ä¸€ID",
            "example": "dashboard"
          },
          "name": {
            "type": "string",
            "description": "èœå•åç§°",
            "example": "dashboard"
          },
          "title": {
            "type": "string",
            "description": "èœå•æ ‡é¢˜ï¼ˆä¸­æ–‡ï¼‰",
            "example": "æ€»è§ˆ"
          },
          "title_en": {
            "type": "string",
            "description": "è‹±æ–‡æ ‡é¢˜",
            "example": "Dashboard",
            "nullable": true
          },
          "path": {
            "type": "string",
            "description": "è·¯ç”±è·¯å¾„",
            "example": "/",
            "nullable": true
          },
          "component": {
            "type": "string",
            "description": "ç»„ä»¶åç§°",
            "example": "Dashboard",
            "nullable": true
          },
          "icon": {
            "type": "string",
            "description": "å›¾æ ‡ç±»å",
            "example": "dashboard",
            "nullable": true
          },
          "emoji": {
            "type": "string",
            "description": "è¡¨æƒ…å›¾æ ‡",
            "example": "ğŸ ",
            "nullable": true
          },
          "parent_id": {
            "type": "string",
            "description": "çˆ¶èœå•ID",
            "example": "user_management",
            "nullable": true
          },
          "permission": {
            "type": "string",
            "description": "æ‰€éœ€æƒé™",
            "example": "menu:dashboard",
            "nullable": true
          },
          "menu_type": {
            "type": "string",
            "enum": ["menu", "button", "tab"],
            "description": "èœå•ç±»å‹",
            "example": "menu",
            "default": "menu"
          },
          "sort_order": {
            "type": "integer",
            "description": "æ’åºå€¼",
            "example": 1,
            "default": 0
          },
          "is_hidden": {
            "type": "boolean",
            "description": "æ˜¯å¦éšè—",
            "example": false,
            "default": false
          },
          "is_external": {
            "type": "boolean",
            "description": "æ˜¯å¦å¤–éƒ¨é“¾æ¥",
            "example": false,
            "default": false
          },
          "status": {
            "type": "string",
            "enum": ["active", "disabled"],
            "description": "èœå•çŠ¶æ€",
            "example": "active",
            "default": "active"
          },
          "meta": {
            "type": "object",
            "description": "å…ƒæ•°æ®",
            "additionalProperties": true,
            "example": {"title": "æ€»è§ˆ", "title_en": "Dashboard", "keepAlive": true},
            "nullable": true
          }
        }
      },
      "MenuUpdateRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "èœå•åç§°",
            "example": "dashboard"
          },
          "title": {
            "type": "string",
            "description": "èœå•æ ‡é¢˜ï¼ˆä¸­æ–‡ï¼‰",
            "example": "æ€»è§ˆ"
          },
          "title_en": {
            "type": "string",
            "description": "è‹±æ–‡æ ‡é¢˜",
            "example": "Dashboard",
            "nullable": true
          },
          "path": {
            "type": "string",
            "description": "è·¯ç”±è·¯å¾„",
            "example": "/",
            "nullable": true
          },
          "component": {
            "type": "string",
            "description": "ç»„ä»¶åç§°",
            "example": "Dashboard",
            "nullable": true
          },
          "icon": {
            "type": "string",
            "description": "å›¾æ ‡ç±»å",
            "example": "dashboard",
            "nullable": true
          },
          "emoji": {
            "type": "string",
            "description": "è¡¨æƒ…å›¾æ ‡",
            "example": "ğŸ ",
            "nullable": true
          },
          "parent_id": {
            "type": "string",
            "description": "çˆ¶èœå•ID",
            "example": "user_management",
            "nullable": true
          },
          "permission": {
            "type": "string",
            "description": "æ‰€éœ€æƒé™",
            "example": "menu:dashboard",
            "nullable": true
          },
          "menu_type": {
            "type": "string",
            "enum": ["menu", "button", "tab"],
            "description": "èœå•ç±»å‹",
            "example": "menu"
          },
          "sort_order": {
            "type": "integer",
            "description": "æ’åºå€¼",
            "example": 1
          },
          "is_hidden": {
            "type": "boolean",
            "description": "æ˜¯å¦éšè—",
            "example": false
          },
          "is_external": {
            "type": "boolean",
            "description": "æ˜¯å¦å¤–éƒ¨é“¾æ¥",
            "example": false
          },
          "status": {
            "type": "string",
            "enum": ["active", "disabled"],
            "description": "èœå•çŠ¶æ€",
            "example": "active"
          },
          "meta": {
            "type": "object",
            "description": "å…ƒæ•°æ®",
            "additionalProperties": true,
            "example": {"title": "æ€»è§ˆ", "title_en": "Dashboard", "keepAlive": true},
            "nullable": true
          }
        }
      },
      "MenuBatchImportRequest": {
        "type": "object",
        "required": ["menus"],
        "properties": {
          "menus": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/MenuCreateRequest"
            },
            "description": "èœå•åˆ—è¡¨",
            "minItems": 1
          },
          "clear_existing": {
            "type": "boolean",
            "description": "æ˜¯å¦æ¸…é™¤ç°æœ‰èœå• (é»˜è®¤: false)",
            "example": false,
            "default": false
          }
        }
      },
      "MenuItem": {
        "type": "object",
        "required": ["id", "name", "title", "menu_type", "sort_order", "is_hidden", "status"],
        "properties": {
          "id": {
            "type": "string",
            "description": "èœå•å”¯ä¸€ID",
            "example": "dashboard"
          },
          "name": {
            "type": "string",
            "description": "èœå•åç§°",
            "example": "dashboard"
          },
          "title": {
            "type": "string",
            "description": "æ˜¾ç¤ºæ ‡é¢˜ï¼ˆä¸­æ–‡ï¼‰",
            "example": "æ€»è§ˆ"
          },
          "title_en": {
            "type": "string",
            "description": "è‹±æ–‡æ ‡é¢˜",
            "example": "Dashboard",
            "nullable": true
          },
          "path": {
            "type": "string",
            "description": "è·¯ç”±è·¯å¾„",
            "example": "/",
            "nullable": true
          },
          "component": {
            "type": "string",
            "description": "ç»„ä»¶åç§°",
            "example": "Dashboard",
            "nullable": true
          },
          "icon": {
            "type": "string",
            "description": "å›¾æ ‡ç±»å",
            "example": "dashboard",
            "nullable": true
          },
          "emoji": {
            "type": "string",
            "description": "è¡¨æƒ…å›¾æ ‡",
            "example": "ğŸ ",
            "nullable": true
          },
          "parent_id": {
            "type": "string",
            "description": "çˆ¶èœå•ID",
            "example": "user_management",
            "nullable": true
          },
          "permission": {
            "type": "string",
            "description": "æ‰€éœ€æƒé™",
            "example": "menu:dashboard",
            "nullable": true
          },
          "menu_type": {
            "type": "string",
            "enum": ["menu", "button", "tab"],
            "description": "èœå•ç±»å‹",
            "example": "menu"
          },
          "sort_order": {
            "type": "integer",
            "description": "æ’åºå€¼",
            "example": 1
          },
          "is_hidden": {
            "type": "boolean",
            "description": "æ˜¯å¦éšè—",
            "example": false
          },
          "is_external": {
            "type": "boolean",
            "description": "æ˜¯å¦å¤–éƒ¨é“¾æ¥",
            "example": false,
            "nullable": true
          },
          "status": {
            "type": "string",
            "enum": ["active", "disabled"],
            "description": "èœå•çŠ¶æ€",
            "example": "active"
          },
          "meta": {
            "type": "object",
            "description": "å…ƒæ•°æ®",
            "additionalProperties": true,
            "example": {"keepAlive": true},
            "nullable": true
          },
          "children": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/MenuItem"
            },
            "description": "å­èœå•",
            "nullable": true
          }
        }
      },
      "MenuResponse": {
        "type": "object",
        "required": ["success", "message"],
        "properties": {
          "success": {
            "type": "boolean",
            "description": "æ“ä½œæ˜¯å¦æˆåŠŸ",
            "example": true
          },
          "message": {
            "type": "string",
            "description": "å“åº”æ¶ˆæ¯",
            "example": "æˆåŠŸå¯¼å…¥ 2 ä¸ªèœå•"
          },
          "data": {
            "type": "object",
            "description": "å“åº”æ•°æ®",
            "additionalProperties": true,
            "example": {
              "imported_count": 2,
              "clear_existing": false
            },
            "nullable": true
          }
        }
      },
      "APIError": {
        "type": "object",
        "required": ["detail", "status_code"],
        "properties": {
          "detail": {
            "type": "string",
            "description": "é”™è¯¯æè¿°ä¿¡æ¯"
          },
          "status_code": {
            "type": "integer",
            "description": "HTTPçŠ¶æ€ç "
          }
        }
      }
    },
    "responses": {
      "UnauthorizedError": {
        "description": "æœªè®¤è¯æˆ–tokenè¿‡æœŸ",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/APIError"
            },
            "example": {
              "detail": "æœªè®¤è¯æˆ–tokenå·²è¿‡æœŸ",
              "status_code": 401
            }
          }
        }
      },
      "ForbiddenError": {
        "description": "æƒé™ä¸è¶³",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/APIError"
            },
            "example": {
              "detail": "åªæœ‰ç®¡ç†å‘˜å¯ä»¥æ‰¹é‡å¯¼å…¥èœå•",
              "status_code": 403
            }
          }
        }
      },
      "NotFoundError": {
        "description": "èµ„æºä¸å­˜åœ¨",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/APIError"
            },
            "example": {
              "detail": "èœå•ä¸å­˜åœ¨",
              "status_code": 404
            }
          }
        }
      },
      "InternalServerError": {
        "description": "æœåŠ¡å™¨å†…éƒ¨é”™è¯¯",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/APIError"
            },
            "example": {
              "detail": "æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼Œè¯·ç¨åé‡è¯•",
              "status_code": 500
            }
          }
        }
      }
    }
  },
  "tags": [
    {
      "name": "èœå•ç®¡ç†",
      "description": "èœå•ç®¡ç†ç›¸å…³æ¥å£ï¼ŒåŒ…æ‹¬CRUDæ“ä½œå’Œæ‰¹é‡å¯¼å…¥"
    }
  ]
}